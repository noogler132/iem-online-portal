# Creating content

Oftentimes you'll want to ask Authbox if a user should be allowed to do something and then write to a database. That write may either succeed or fail. Maybe there was a transient error, or the data layer does additional access control checks. Additionally you may be adding a new row to a database with an autogenerated unique ID.

Either way, you need to tell Authbox something about the result of an action. That's where `beginCheck()` and `endCheck()` come in.

## Example

Without `beginCheck()` and `endCheck()` your code looks like this:

```js
Authbox.check(request, actionData, function(verdict) {
  if (verdict.type === 'ALLOW') {
    var newObjectID = writeToDB(...);
  }
});
```

If you could tell Authbox about `newObjectID` it will get much better at identifying abuse. You can do it with `beginCheck()` and `endCheck()`:

```js
Authbox.beginCheck(request, actionData, function(verdict) {
  if (verdict.type === 'ALLOW') {
    saveToDB(..., function(err, newObjectID) {
      if (!err) {
        // Tell Authbox about the newObjectID.
        actionData.$changedContentID = newObjectID;
        actionData.$success = true;
        Authbox.endCheck(request, actionData);
      } else {
        // There was an error saving to the database.
        actionData.$failureReason = err.message;
        Authbox.endCheck(request, actionData);
      }
    });
  }
});
```

Note that you should listen to the verdict returned by `beginCheck()`: if it does not return `ALLOW`, you should never call `endCheck()`.