'use strict';
var authbox = require('./');

authbox.configure({
  apiKey: 'authboxTesting',
  secretKey: '37b4a22f6101e62123856301c659a999',
  endpoint: 'http://localhost:3000/api',
  getRequestData: function(req, cb) {
    cb(null, {
      $user: {
        $userIDs: [{$type: '$email', $key: 'foo@bar.com'}]
      }
    });
  }
});

var connect = require('connect');
var app = connect();

app.use(authbox.middleware);
app.use(function(req, res, next) {
  res.end('<html><body>Hello World!</body></html>');
});

var server = app.listen(8888, function() {
  var host = server.address().address;
  var port = server.address().port;
  console.log('Example app listening at http://%s:%s', host, port);
});
